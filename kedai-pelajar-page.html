<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kedai Pelajar - Piilancer: Ruang Kreasi Pelajar</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts - Pacifico (for logo) and Montserrat (for headings) -->
    <link href="https://fonts.googleapis.com/css2?family=Pacifico&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700;800&display=swap" rel="stylesheet">
    <style>
        /* Custom font for a modern look */
        body {
            font-family: "Inter", sans-serif;
        }
        /* Custom blue color for Tailwind */
        .bg-custom-blue {
            background-color: #8aceff;
        }
        .text-custom-blue {
            color: #8aceff;
        }
        .hover\\:bg-custom-blue-light:hover {
            background-color: #e0f2ff; /* A lighter shade for hover effects */
        }
        .hover\\:text-custom-blue-dark:hover {
            color: #007bff; /* A slightly darker blue for hover text */
        }
        .focus\\:ring-custom-blue-focus:focus {
            --tw-ring-color: #8aceff;
        }
        /* Style for Piilancer logo font */
        .piilancer-logo {
            font-family: 'Pacifico', cursive;
            font-size: 2rem;
            line-height: 1;
        }
        /* Style for Hero Section Heading font */
        .hero-heading-font {
            font-family: 'Montserrat', sans-serif;
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800 antialiased">
    <div class="min-h-screen flex flex-col">
        <!-- Header Section (Consistent with other pages) -->
        <header class="bg-white shadow-md py-4">
            <div class="container mx-auto px-4 flex justify-between items-center">
                <a href="homepage-template.html" class="piilancer-logo text-blue-600 rounded-lg p-2 hover:bg-blue-50 transition duration-300">Piilancer</a>
                <nav class="hidden md:flex space-x-6 items-center">
                    <a href="baca-blog-page.html" class="text-gray-600 hover:text-blue-600 font-medium transition duration-300 rounded-lg px-3 py-2 hover:bg-gray-100">Baca Blog</a>
                    <a href="tulis-blog-page.html" class="text-gray-600 hover:text-blue-600 font-medium transition duration-300 rounded-lg px-3 py-2 hover:bg-gray-100">Tulis Blog</a>
                    <a href="kedai-pelajar-page.html" class="text-blue-600 font-bold transition duration-300 rounded-lg px-3 py-2 bg-gray-100">Kedai Pelajar</a>
                    <a href="tentang-page.html" class="text-gray-600 hover:text-blue-600 font-medium transition duration-300 rounded-lg px-3 py-2 hover:bg-gray-100">Tentang</a>
                    
                    <!-- Profile Picture / Auth Menu -->
                    <div class="relative ml-4">
                        <button id="profile-menu-button" class="flex items-center justify-center w-10 h-10 rounded-full bg-blue-200 text-blue-800 focus:outline-none focus:ring-2 focus:ring-blue-500 transition duration-300">
                            <img id="profile-pic" src="https://placehold.co/40x40/cbd5e1/4a5568?text=U" alt="User Profile" class="rounded-full w-full h-full object-cover hidden">
                            <svg id="profile-icon" class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path fill-rule="evenodd" d="M12 4a4 4 0 100 8 4 4 0 000-8zm-2 9a4 4 0 00-4 4v1a2 2 0 002 2h8a2 2 0 002-2v-1a4 4 0 00-4-4h-4z" clip-rule="evenodd" />
                            </svg>
                        </button>
                        <div id="profile-menu" class="absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-20 hidden">
                            <a href="auth-page.html" id="login-signup-link" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Login / Daftar</a>
                            <a href="#" id="my-profile-link" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 hidden">Profil Saya</a>
                            <button id="logout-button" class="block w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-gray-100 hidden">Logout</button>
                        </div>
                    </div>
                </nav>
                <!-- Mobile Menu Button (Hamburger) -->
                <button class="md:hidden text-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded-lg p-2">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path>
                    </svg>
                </button>
            </div>
        </header>

        <!-- Main Content - Kedai Pelajar -->
        <main class="flex-grow py-16 bg-gray-100 flex items-center justify-center text-center">
            <div class="container mx-auto px-4 max-w-3xl bg-white p-10 rounded-xl shadow-lg border border-gray-200">
                <h1 class="text-4xl md:text-5xl font-extrabold text-gray-900 mb-6 hero-heading-font">Kedai Pelajar</h1>
                <p class="text-lg md:text-xl text-gray-700 leading-relaxed mb-8">
                    Selamat datang di Kedai Pelajar! Ini adalah tempat di mana para pelajar bisa saling berbagi dan menawarkan karya, jasa, atau barang-barang unik yang mereka buat atau miliki.
                </p>
                <p class="text-lg md:text-xl text-gray-700 leading-relaxed mb-8">
                    Baik itu ilustrasi digital, kerajinan tangan, jasa les privat, atau barang bekas yang masih layak pakai, Kedai Pelajar adalah platform untuk menunjukkan bakat dan kreativitasmu, sekaligus mendapatkan penghasilan tambahan!
                </p>
                <p class="text-lg md:text-xl text-gray-700 leading-relaxed mb-10">
                    Fitur lengkap Kedai Pelajar akan segera hadir! Nantikan pembaruan kami.
                </p>
                <div id="firebase-status" class="mb-4 p-3 rounded-lg text-sm text-center bg-blue-50 text-blue-800 border border-blue-200 hidden">
                    <!-- Status will be displayed here by JavaScript -->
                </div>
            </div>
        </main>

        <!-- Footer Section (Consistent with other pages) -->
        <footer class="bg-gray-800 text-white py-8">
            <div class="container mx-auto px-4 text-center">
                <p class="text-gray-400">&copy; 2025 Piilancer. All rights reserved.</p>
                <div class="flex justify-center space-x-6 mt-4">
                    <a href="https://instagram.com/piilancer" target="_blank" rel="noopener noreferrer" class="text-gray-400 hover:text-white transition duration-300 rounded-lg p-2 hover:bg-gray-700 flex items-center space-x-2">
                        <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                            <path fill-rule="evenodd" d="M12.315 2.411a.75.75 0 01.597.953l-1.39 4.364 7.26 2.253a.75.75 0 01.385 1.487l-7.26 2.253 1.39 4.364a.75.75 0 01-1.35.43l-1.39-4.364-7.26 2.253a.75.75 0 01-.385-1.487l7.26-2.253-1.39-4.364a.75.75 0 01.75-.43zM12 0a12 12 0 100 24 12 12 0 000-24z" clip-rule="evenodd" />
                        </svg>
                        <span>@piilancer</span>
                    </a>
                    <a href="#" class="text-gray-400 hover:text-white transition duration-300 rounded-lg p-2 hover:bg-gray-700">Kebijakan Privasi</a>
                    <a href="#" class="text-gray-400 hover:text-white transition duration-300 rounded-lg p-2 hover:bg-gray-700">Ketentuan Layanan</a>
                </div>
            </div>
        </footer>
    </div>

    <!-- Firebase SDK CDN -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";

        // --- START LOCAL DEVELOPMENT CONFIG (UNCOMMENT AND FILL FOR LOCAL TESTING) ---
        /*
        const firebaseConfig = {
            apiKey: "YOUR_API_KEY",
            authDomain: "YOUR_PROJECT_ID.firebaseapp.com",
            projectId: "YOUR_PROJECT_ID",
            storageBucket: "YOUR_PROJECT_ID.appspot.com",
            messagingSenderId: "YOUR_MESSAGING_SENDER_ID",
            appId: "YOUR_APP_ID",
            // measurementId: "YOUR_MEASUREMENT_ID" // Optional
        };
        const appId = "YOUR_PROJECT_ID"; // Or any unique ID for your local testing
        */
        // --- END LOCAL DEVELOPMENT CONFIG ---

        // Firebase configuration (provided by Canvas environment, or use local config above)
        const firebaseConfig = JSON.parse(typeof __firebase_config !== 'undefined' ? __firebase_config : '{}');
        const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id'; // Fallback for local testing

        let app;
        let auth;

        // Get elements
        const profileMenuButton = document.getElementById('profile-menu-button');
        const profileMenu = document.getElementById('profile-menu');
        const profilePic = document.getElementById('profile-pic');
        const profileIcon = document.getElementById('profile-icon');
        const loginSignupLink = document.getElementById('login-signup-link');
        const myProfileLink = document.getElementById('my-profile-link');
        const logoutButton = document.getElementById('logout-button');
        const firebaseStatusDiv = document.getElementById('firebase-status');

        // Custom message display function (replaces alert)
        function displayCustomMessage(message, type = 'success') {
            console.log(`UI Message (${type}): ${message}`); // Log to console
            const messageDiv = document.createElement('div');
            messageDiv.className = `fixed top-4 right-4 z-50 p-4 rounded-md shadow-lg text-white ${type === 'success' ? 'bg-green-500' : 'bg-red-500'}`;
            messageDiv.textContent = message;
            document.body.appendChild(messageDiv);
            setTimeout(() => {
                messageDiv.remove();
            }, 3000);
        }

        // Initialize Firebase on window load
        window.onload = () => {
            try {
                if (Object.keys(firebaseConfig).length > 0) {
                    app = initializeApp(firebaseConfig);
                    auth = getAuth(app);
                    firebaseStatusDiv.textContent = 'Firebase berhasil diinisialisasi.';
                    firebaseStatusDiv.classList.remove('hidden');
                    firebaseStatusDiv.classList.remove('bg-red-50', 'text-red-800', 'border-red-200');
                    firebaseStatusDiv.classList.add('bg-blue-50', 'text-blue-800', 'border-blue-200');
                    console.log("Firebase app initialized on kedai-pelajar page:", app);
                    console.log("Firebase auth object on kedai-pelajar page:", auth);

                    // Listen for auth state changes immediately after init
                    onAuthStateChanged(auth, (user) => {
                        if (user) {
                            console.log("Auth State Changed on kedai-pelajar page: User is logged in.", user.uid);
                            profileIcon.classList.add('hidden');
                            profilePic.classList.remove('hidden');
                            if (user.photoURL) {
                                profilePic.src = user.photoURL;
                            } else {
                                const initial = user.displayName ? user.displayName.charAt(0).toUpperCase() : (user.email ? user.email.charAt(0).toUpperCase() : 'U');
                                profilePic.src = `https://placehold.co/40x40/cbd5e1/4a5568?text=${initial}`;
                            }
                            loginSignupLink.classList.add('hidden');
                            myProfileLink.classList.remove('hidden');
                            logoutButton.classList.remove('hidden');
                        } else {
                            console.log("Auth State Changed on kedai-pelajar page: User is logged out.");
                            profileIcon.classList.remove('hidden');
                            profilePic.classList.add('hidden');
                            loginSignupLink.classList.remove('hidden');
                            myProfileLink.classList.add('hidden');
                            logoutButton.classList.add('hidden');
                        }
                    });
                } else {
                    firebaseStatusDiv.textContent = 'Firebase config tidak ditemukan. Header auth tidak akan berfungsi.';
                    firebaseStatusDiv.classList.remove('hidden');
                    firebaseStatusDiv.classList.remove('bg-blue-50', 'text-blue-800', 'border-blue-200');
                    firebaseStatusDiv.classList.add('bg-red-50', 'text-red-800', 'border-red-200');
                    console.error("Firebase config is empty or missing on kedai-pelajar page. Header auth features will not work.");
                    displayCustomMessage('Firebase config tidak ditemukan. Fitur otentikasi tidak akan berfungsi.', 'error');
                }
            } catch (error) {
                firebaseStatusDiv.textContent = `Error inisialisasi Firebase: ${error.message}`;
                firebaseStatusDiv.classList.remove('hidden');
                firebaseStatusDiv.classList.remove('bg-blue-50', 'text-blue-800', 'border-blue-200');
                firebaseStatusDiv.classList.add('bg-red-50', 'text-red-800', 'border-red-200');
                console.error("Error initializing Firebase on kedai-pelajar page:", error);
                displayCustomMessage(`Error inisialisasi Firebase: ${error.message}`, 'error');
            }
        };

        // Toggle profile menu visibility
        profileMenuButton.addEventListener('click', (event) => {
            event.stopPropagation(); // Prevent click from bubbling to window
            profileMenu.classList.toggle('hidden');
        });

        // Close menu if clicked outside
        window.addEventListener('click', (event) => {
            if (!profileMenuButton.contains(event.target) && !profileMenu.contains(event.target)) {
                profileMenu.classList.add('hidden');
            }
        });

        // Handle logout
        logoutButton.addEventListener('click', async () => {
            if (!auth) {
                displayCustomMessage('Firebase Auth belum diinisialisasi.', 'error');
                console.error('Logout failed: Firebase Auth not initialized.');
                return;
            }
            try {
                await signOut(auth);
                console.log("User logged out successfully from kedai-pelajar page.");
                window.location.reload(); // Simple reload to reflect auth state
            } catch (error) {
                console.error("Logout Error on kedai-pelajar page:", error);
                displayCustomMessage('Terjadi kesalahan saat logout. Coba lagi.', 'error');
            }
        });
    </script>
</body>
</html>
